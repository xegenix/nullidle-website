<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">


<title>Most efficient way to run multiple websites on Docker with LetsEncrypt SSL - lackful.com</title>
<meta name="description" content="Need to reverse-proxy multiple Docker websites?">

<meta name="author" content="Joshua Marcum"><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "lackful.com",
    
    "url": "https:\/\/lackful.com"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/lackful.com"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/lackful.com",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/lackful.com\/post\/2023\/dec\/most-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt\/",
          "name": "Most efficient way to run multiple websites on docker with lets encrypt ssl"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Joshua Marcum"
  },
  "headline": "Most efficient way to run multiple websites on Docker with LetsEncrypt SSL",
  "description" : "Need to reverse-proxy multiple Docker websites?",
  "inLanguage" : "en",
  "wordCount":  1321 ,
  "datePublished" : "0001-01-01T00:00:00",
  "dateModified" : "0001-01-01T00:00:00",
  "image" : "https:\/\/lackful.com",
  "keywords" : [ "blog, guides, general, docker, lets-encrypt, SSL, nginx, traefik, haproxy" ],
  "mainEntityOfPage" : "https:\/\/lackful.com\/post\/2023\/dec\/most-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/lackful.com",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/lackful.com",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:image" content="https://lackful.com/img/posts/rproxyflow.png">
<meta property="og:url" content="https://lackful.com/post/2023/dec/most-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt/">
<meta property="og:type" content="website">
<meta property="og:site_name" content="lackful.com">

<link rel="apple-touch-icon" sizes="180x180" href=" https://lackful.com/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://lackful.com/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://lackful.com/favicon/favicon-16x16.png">

<meta name="generator" content="Hugo 0.121.1">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Alumni+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Genos:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  
<link rel="alternate" href="https://lackful.com/index.xml" type="application/rss+xml" title="lackful.com">
<script src="https://lackful.com/js/dark-mode.js"></script><link rel="stylesheet" href="https://lackful.com/vendor/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="https://lackful.com/vendor/bootstrap-icons/bootstrap-icons.css">
<link rel="stylesheet" href="https://lackful.com/css/main.css">
<link rel="stylesheet" href="https://lackful.com/css/highlight.min.css"><link rel="stylesheet" href="https://lackful.com/css/codeblock.css">





  </head>
  <body>
    
<div class="container fixed-top">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-md-12 col-lg-10 col-xl-10">

      <nav class="navbar navbar-expand-lg navbar-light fixed-top p-0">
        <div class="container">
          
          <a class="navbar-brand fw-bold" href="https://lackful.com">lackful.com</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav mb-2 mb-lg-0">
              
              

              <li class="nav-item">

                
                
                
                
                

                <a class="nav-link " title="Home"
                  href="/"> Home</a>
              </li>

              
              
              

              <li class="nav-item">

                
                
                
                
                

                <a class="nav-link " title="Notes"
                  href="/notes/"> Notes</a>
              </li>

              
              
              

              <li class="nav-item">

                
                
                
                
                

                <a class="nav-link " title="Tags"
                  href="/tags/blog/"> Tags</a>
              </li>

              
              
              

              <li class="nav-item">

                
                
                
                
                

                <a class="nav-link " title="Collections"
                  href="/collections/"> Collections</a>
              </li>

              
              
              

              <li class="nav-item">

                
                
                
                
                

                <a class="nav-link " title="About"
                  href="/about/"> About</a>
              </li>

              
              
              
              <li class="nav-item nav-link">
                <a id="dark-mode-toggle" class="bi bi-moon-stars" role="button"></a>
              </li>
              
            </ul>
          </div>
        </div>
      </nav>

    </div>
  </div>
</div>
    









<header class="header-section ">

  <div class="intro-header no-img mt-10">
    <div class="container">
      <div class="row justify-content-center">
        
        <div class="col-sm-12 col-md-12 col-lg-8 col-xl-8">
          

          
          <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
            

            <div class="post-heading">
              

              

              
              <h1 class="fw-semibold display-5 lh-1 mb-3"> 
                Most efficient way to run multiple websites on Docker with LetsEncrypt SSL
                
              </h1>
              
              

              

              
              
              <span class="post-meta">
  
  
  &nbsp;1 January 10112

  

  

  
</span>


              
              
            </div>
          </div>
          
        </div>
        
        
      </div>
      
    </div>
  </div>
</header>



    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 ">

      <div class="card-image card-image-blog p-0">
        
        
          
            <img src="/img/posts/rproxyflow.png" alt="img/posts/rproxyflow.png" class="card-img-bottom rounded img-fluid lazyload">
          
        


        
      </div>
    </div>

    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4">
      <article role="main" class="blog-post">
        <h1 id="most-efficient-way-to-run-multiple-sites-on-docker-w-letsencrypt">Most efficient way to run multiple sites on Docker w/ LetsEncrypt</h1>
<h2 id="article-summary">Article Summary</h2>
<p>Let&rsquo;s face it, there are a million different ways to configure a server to run multiple web applications on Docker. Normally, I enjoy nothing more than seeing an entire stack provisioned by a compose file. Sadly, a single compose file isn&rsquo;t ideal for a development server with multiple domains and frequently changing applications. When you&rsquo;re application is production ready, I recommend switching to a Cloudflare Zero Trust tunnel to eliminate any unnecessary port exposure.</p>
<p>We are going to install certbot for provisioning SSL certificates to the domains we intend on using followed by installation of our desired reverse-proxy service. Your web applications will be SSL enabled from the moment they launch.</p>
<h2 id="getting-started">Getting Started</h2>
<p>Lets save ourselves a headache and set some temporary environment variables. They will be referencable until we end our existing terminal session. If you start a new session, remember you will need to rerun these commands. Modify the values below to suit your needs, replacing &lsquo;<a href="mailto:user@domain.tld">user@domain.tld</a>&rsquo; with a good email address and &lsquo;mydomain.tld&rsquo; with your registered domain.</p>
<blockquote>
<p>export EMAIL=&ldquo;<a href="mailto:user@doman.tld">user@doman.tld</a>&rdquo;; export DOMAIN=&ldquo;example.com&rdquo;</p>
</blockquote>
<h2 id="set-temporary-environment-variables">Set temporary environment variables.</h2>
<p>My end result would be (do not use - this unless you swapped with your information.</p>
<blockquote>
<p>export EMAIL=&ldquo;<a href="mailto:josh.*******@icloud.com">josh.*******@icloud.com</a>&rdquo;; export DOMAIN=&ldquo;nullidle.com&rdquo;</p>
</blockquote>
<p>Example reflecting information specific to my needs.</p>
<p>The first item to configure (yes, even before installing our proxy service) is the SSL certificate. Our DNS should already be configured to our domain&rsquo;s IPv4 address. If you just changed your A record for www and @ to your host&rsquo;s IPv4 address, check propagation across different regions using whatsmydns.net. It might take some locations longer than others to update. Otherwise to validate the domain is pointed correctly using the command line, use the ping command. See example below.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>ping mydomain.tld -c1
</span></span><span style="display:flex;"><span>ping www.mydomain.tld -c1
</span></span><span style="display:flex;"><span>ping6 mydomain.tld -c1 # IPv6 configured hosts.
</span></span><span style="display:flex;"><span>ping6 www.mydomain.tld -c1 # IPv6 configured hosts.
</span></span></code></pre></div><p>Everything is good? Perfect, onto configuring our SSL certificate.</p>
<h2 id="install-certbot">Install Certbot</h2>
<p>We are going to use a snap package for our certbot install; these are a type of universally supported (cross-distribution) package for Linux based systems.</p>
<p>Depending on what distribution you are currently using, verify if snapd is installed using the following command. If snap is installed on the system, it will output the path of the snap binary.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>josh@nullidle:~# command -v snap
</span></span><span style="display:flex;"><span>/usr/bin/snap
</span></span></code></pre></div><p>If there is no output upon return, snap is not installed. You have a couple of options. Simply install snapd from your distribution&rsquo;s package manager, then you can install certbot from snap or any other packages which your distro&rsquo;s built-in package manager may lack. Otherwise feel free to install certbot directly from the operating systems package manager. Either way should produce a working certbot installation.</p>
<h3 id="snap-certbot-installation">Snap certbot installation:</h3>
<blockquote>
<p>sudo snap install &ndash;classic certbot</p>
</blockquote>
<h3 id="verify-installation">Verify Installation</h3>
<p>The following command will verify if the snap bin directory is provided in $PATH. If it is not, a symlink will be created to /snap/bin/certbot under /usr/bin/certbot</p>
<blockquote>
<p>! command -v certbot &amp;&amp; sudo ln -sv /snap/bin/certbot /usr/bin/certbot</p>
</blockquote>
<h3 id="provision-ssl-certificate">Provision SSL Certificate</h3>
<p>If you agree to the LetsEncrypt terms of service, run the below command to get your certificate created. You should not encounter any errors unless something is already utilizing port eighty.</p>
<blockquote>
<p>sudo certbot certonly &ndash;standalone &ndash;agree-tos -d $DOMAIN -m $EMAIL</p>
</blockquote>
<p>NOTE: FOR ADDITIONAL DOMAINS ONLY
In order to successfully validate a second or third certificate, port 80 cannot be in use. Our reverse-proxy (nginx/HAProxy/Traefik) is already utilizing this port; we will need to temporarily stop the Nginx service. I have created a command chain to stop nginx, provision the certificate, start nginx, and show nginx status for your convenience.</p>
<p>The runtime of this chain should only take a second or two at most. If you jumped directly to this step, ensure you set the variables for DOMAIN &amp; EMAIL if they are not already set. To check run the env command. (Setting variables example: DOMAIN=mydomain.tld; <a href="mailto:EMAIL=user@whatever.tld">EMAIL=user@whatever.tld</a>;)</p>
<blockquote>
<p>$( sudo systemctl stop nginx &amp;&amp; sudo certbot certonly &ndash;standalone &ndash;agree-tos -d $DOMAIN -m $EMAIL ); systemctl start nginx; systemctl status nginx;</p>
</blockquote>
<h2 id="setup-reverse-proxy">Setup Reverse Proxy</h2>
<h3 id="install-nginx">Install Nginx</h3>
<p>We will be using nginx as a reverse proxy to our upstream applications. Run the command specific to your Linux distribution.</p>
<p>Debian / Ubuntu-Based Distributions</p>
<blockquote>
<p>apt install nginx</p>
</blockquote>
<p>RHEL-Based Distributions (RedHat/Fedora/CentOS/Scientific/Oracle/Alma/Rocky)</p>
<blockquote>
<p>dnf install nginx</p>
</blockquote>
<p>Arch-Based Distributions</p>
<blockquote>
<p>pacman -S nginx</p>
</blockquote>
<p>Gentoo</p>
<blockquote>
<p>emerge nginx</p>
</blockquote>
<p>Alpine</p>
<blockquote>
<p>apk add nginx</p>
</blockquote>
<h3 id="disable-default-configuration">Disable Default Configuration</h3>
<p>We won&rsquo;t be using the default configuration included with the nginx installation; therefore, we are simply going to remove the symlink from /etc/nginx/sites-enabled/default that points to /etc/nginx/sites-available/default</p>
<blockquote>
<p>sudo unlink /etc/nginx/conf.d/sites-enabled/default</p>
</blockquote>
<p>For some Linux distributions, the default configuration file might be located in /etc/nginx/conf.d/default.conf - just move this file elsewhere outside of the conf.d folder.</p>
<blockquote>
<p>mv -v /etc/nginx/conf.d/default.conf /etc/nginx/.bkup-conf.d-default.conf*</p>
</blockquote>
<h3 id="pre-configure-upstream-application">Pre-Configure Upstream Application</h3>
<p>If your default.conf was found in /etc/nginx/conf.d, follow the below instructions but use the /etc/nginx/conf.d path instead and skip step 3.</p>
<pre><code>Open your favorite editor of choice to the following path
</code></pre>
<ul>
<li>/etc/nginx/sites-available/YOUR_DOMAIN_NAME.conf</li>
</ul>
<p>Paste the below configuration into the file and replace the six instances of YOUR_DOMAIN_NAME and the instance of EXPOSED_CONTAINER_PORT with the appropriate values. The EXPOSED_CONTAINER_PORT occurrence should be set to the Docker web application&rsquo;s exposed port (example: 3000, 8080, or 9000).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>  listen <span style="color:#099">80</span>;
</span></span><span style="display:flex;"><span>  listen [::]:<span style="color:#099">80</span>;
</span></span><span style="display:flex;"><span>  server_name YOUR_DOMAIN_NAME;
</span></span><span style="display:flex;"><span>  location <span style="font-weight:bold">/.</span>well<span style="font-weight:bold">-</span>known<span style="font-weight:bold">/</span>acme<span style="font-weight:bold">-</span>challenge<span style="font-weight:bold">/</span> { root <span style="font-weight:bold">/</span>usr<span style="font-weight:bold">/</span>share<span style="font-weight:bold">/</span>nginx<span style="font-weight:bold">/</span>html; allow all; }
</span></span><span style="display:flex;"><span>  location <span style="font-weight:bold">/</span> { <span style="font-weight:bold">return</span> <span style="color:#099">301</span> https:<span style="font-weight:bold">//$</span>server_name<span style="font-weight:bold">$</span>request_uri; }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>server {
</span></span><span style="display:flex;"><span>  listen <span style="color:#099">443</span> ssl http2;
</span></span><span style="display:flex;"><span>  listen [::]:<span style="color:#099">443</span> ssl http2;
</span></span><span style="display:flex;"><span>  server_name YOUR_DOMAIN_NAME;
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>  access_log <span style="font-weight:bold">/</span><span style="font-weight:bold">var</span><span style="font-weight:bold">/</span><span style="color:#999">log</span><span style="font-weight:bold">/</span>nginx<span style="font-weight:bold">/</span>YOUR_DOMAIN_NAME<span style="font-weight:bold">.</span>access<span style="font-weight:bold">.</span>log;
</span></span><span style="display:flex;"><span>  error_log <span style="font-weight:bold">/</span><span style="font-weight:bold">var</span><span style="font-weight:bold">/</span><span style="color:#999">log</span><span style="font-weight:bold">/</span>nginx<span style="font-weight:bold">/</span>YOUR_DOMAIN_NAME<span style="font-weight:bold">.</span>error<span style="font-weight:bold">.</span>log;
</span></span><span style="display:flex;"><span>  client_max_body_size <span style="color:#099">20</span>m;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ssl_protocols TLSv1<span style="font-weight:bold">.</span><span style="color:#099">2</span> TLSv1<span style="font-weight:bold">.</span><span style="color:#099">3</span>;
</span></span><span style="display:flex;"><span>  ssl_ciphers ECDHE<span style="font-weight:bold">-</span>ECDSA<span style="font-weight:bold">-</span>AES128<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA256:ECDHE<span style="font-weight:bold">-</span>RSA<span style="font-weight:bold">-</span>AES128<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA256:ECDHE<span style="font-weight:bold">-</span>ECDSA<span style="font-weight:bold">-</span>AES256<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA384:ECDHE<span style="font-weight:bold">-</span>RSA<span style="font-weight:bold">-</span>AES256<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA384:ECDHE<span style="font-weight:bold">-</span>ECDSA<span style="font-weight:bold">-</span>CHACHA20<span style="font-weight:bold">-</span>POLY1305:ECDHE<span style="font-weight:bold">-</span>RSA<span style="font-weight:bold">-</span>CHACHA20<span style="font-weight:bold">-</span>POLY1305:DHE<span style="font-weight:bold">-</span>RSA<span style="font-weight:bold">-</span>AES128<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA256:DHE<span style="font-weight:bold">-</span>RSA<span style="font-weight:bold">-</span>AES256<span style="font-weight:bold">-</span>GCM<span style="font-weight:bold">-</span>SHA384;
</span></span><span style="display:flex;"><span>  ssl_prefer_server_ciphers on;
</span></span><span style="display:flex;"><span>  ssl_session_timeout <span style="color:#099">1</span>d;
</span></span><span style="display:flex;"><span>  ssl_session_cache shared:SSL:<span style="color:#099">10</span>m;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ssl_certificate     <span style="font-weight:bold">/</span>etc<span style="font-weight:bold">/</span>letsencrypt<span style="font-weight:bold">/</span>live<span style="font-weight:bold">/</span>YOUR_DOMAIN_NAME<span style="font-weight:bold">/</span>fullchain<span style="font-weight:bold">.</span>pem;
</span></span><span style="display:flex;"><span>  ssl_certificate_key <span style="font-weight:bold">/</span>etc<span style="font-weight:bold">/</span>letsencrypt<span style="font-weight:bold">/</span>live<span style="font-weight:bold">/</span>YOUR_DOMAIN_NAME<span style="font-weight:bold">/</span>privkey<span style="font-weight:bold">.</span>pem;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  location <span style="font-weight:bold">/</span> {
</span></span><span style="display:flex;"><span>    proxy_set_header Host <span style="font-weight:bold">$</span>http_host;
</span></span><span style="display:flex;"><span>    proxy_set_header X<span style="font-weight:bold">-</span>Real<span style="font-weight:bold">-</span><span style="color:#900;font-weight:bold">IP</span> <span style="font-weight:bold">$</span>remote_addr;
</span></span><span style="display:flex;"><span>    proxy_set_header X<span style="font-weight:bold">-</span>Forwarded<span style="font-weight:bold">-</span>Proto https;
</span></span><span style="display:flex;"><span>    proxy_set_header X<span style="font-weight:bold">-</span>Forwarded<span style="font-weight:bold">-</span>For <span style="font-weight:bold">$</span>proxy_add_x_forwarded_for;
</span></span><span style="display:flex;"><span>    proxy_pass http:<span style="font-weight:bold">//</span>localhost:EXPOSED_CONTAINER_PORT;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Vim &amp; NeoVim users: Save time by updating all instances within our config file. Type the following in command mode.</p>
<blockquote>
<p><em>:%s/YOUR_DOMAIN_NAME/example.com/g</em></p>
</blockquote>
<p>Now it&rsquo;s time to rescue those of you not familiar with Vim but tried the easy way of editing everything at once. We need to save the changes and exit.</p>
<blockquote>
<p>:x!</p>
</blockquote>
<p>More problems? Perhaps you forget to run sudo when editing the file? Trust me, I dislike that &ldquo;oh shit, I did all this for nothing.&rdquo; feeling too.
If your user has sudo rights without password, give this a shot from within vim.</p>
<blockquote>
<p>:w! sudo tee %</p>
</blockquote>
<p>Ok, now we have a saved configuration file (hopefully). Lets setup the symlink to enable the site in nginx.</p>
<blockquote>
<p>sudo ln -sv /etc/nginx/sites-available/YOUR_DOMAIN_NAME.conf /etc/nginx/sites-enabled/YOUR_DOMAIN_NAME.conf`</p>
</blockquote>
<p>These changes will not go into effect until we restart the proxy service.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>systemctl restart nginx # systemd
</span></span><span style="display:flex;"><span># OR
</span></span><span style="display:flex;"><span>service nginx restart # other init.
</span></span></code></pre></div><h2 id="docker">Docker</h2>
<p>I will add links to this section for the setup of individual web applications. If you do not already have Docker installed and wish to go this route, follow the below installation steps.</p>
<h3 id="easy-install">Easy Install</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>curl -fsSL https://get.docker.com/ | sh
</span></span></code></pre></div><p>Once it has installed we are going to create and add your current user (this should not be root) to the Docker group. After user has been added to the docker group, changes will not take effect until logout has occurred. Continue command execution under sudo capable user other than root.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>sudo groupadd docker &amp;&amp; sudo usermod -aG docker $USER
</span></span></code></pre></div><p>It is time to see if Docker is currently running, on a systemd based system run the below command to verify status.</p>
<h3 id="verify-install">Verify Install</h3>
<p>We need Docker to start at boot incase the system is rebooted at some point in time, depending on your distributions provided init system, use one or the other set of commands to enable Docker at boot and to start the service.</p>
<h4 id="systemd-init-system">Systemd Init System</h4>
<blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>systemctl status docker
</span></span><span style="display:flex;"><span>sudo systemctl enable docker # If status showed running OR
</span></span><span style="display:flex;"><span>sudo systemctl enable --now docker # If status showed stopped
</span></span></code></pre></div></blockquote>
<p>or</p>
<h4 id="other-init-system">Other Init System</h4>
<blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>chkconfig docker on
</span></span><span style="display:flex;"><span>sudo service docker status
</span></span><span style="display:flex;"><span>sudo service docker start # run if service is not already xvstarted
</span></span></code></pre></div></blockquote>
<h3 id="docker-web-application-guides">Docker Web Application Guides</h3>
<p>Applications will be added as articles are created, there are no guides at the moment.</p>

      </article>
    </div>
  </div>

  
  <div class="row">
    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1">
      <hr class="m-0"/>
    </div>
    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-2">
      
      <div class="blog-tags">
        
        <a href="https://lackful.com/tags/blog/">blog</a>
        
        <a href="https://lackful.com/tags/guides/">guides</a>
        
        <a href="https://lackful.com/tags/general/">general</a>
        
        <a href="https://lackful.com/tags/docker/">docker</a>
        
        <a href="https://lackful.com/tags/lets-encrypt/">lets-encrypt</a>
        
        <a href="https://lackful.com/tags/ssl/">SSL</a>
        
        <a href="https://lackful.com/tags/nginx/">nginx</a>
        
        <a href="https://lackful.com/tags/traefik/">traefik</a>
        
        <a href="https://lackful.com/tags/haproxy/">haproxy</a>
        
      </div>
      
    </div>

    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4">
      
      <section id="social-share">
        <div class="list-inline footer-links">
          

<div>
  <p>Use the share button below if you liked it.</p>
</div>
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
    <li>
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2flackful.com%2fpost%2f2023%2fdec%2fmost-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt%2f" target="_blank" title="Share on Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-facebook" viewBox="0 0 16 16">
          <path
            d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z" />
        </svg>
      </a>
    </li>
    
    <li>
      <a href="//twitter.com/share?url=https%3a%2f%2flackful.com%2fpost%2f2023%2fdec%2fmost-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt%2f&amp;text=Most%20efficient%20way%20to%20run%20multiple%20websites%20on%20Docker%20with%20LetsEncrypt%20SSL&amp;via=map%5bemail%3ajosh%40nullidle.com%20github%3ahttps%3a%2f%2fgithub.com%2fxegenix%20linkedin%3ahttps%3a%2f%2flinkedin.com%2fin%2finsecurity%20name%3aJoshua%20Marcum%20twitter%3a%40polyzombic%20website%3ahttps%3a%2f%2fnullidle.com%2f%5d"
        target="_blank" title="Share on Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-twitter-x" viewBox="0 0 16 16">
          <path
            d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z" />
        </svg>
      </a>
    </li>


    
    <li>
      <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2flackful.com%2fpost%2f2023%2fdec%2fmost-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt%2f&amp;title=Most%20efficient%20way%20to%20run%20multiple%20websites%20on%20Docker%20with%20LetsEncrypt%20SSL"
        target="_blank" title="Share on LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-linkedin" viewBox="0 0 16 16">
          <path
            d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z" />
        </svg>
      </a>
    </li>

    <li>
      <a target="_blank" rel="noopener noreferrer" aria-label="share Most efficient way to run multiple websites on Docker with LetsEncrypt SSL on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2flackful.com%2fpost%2f2023%2fdec%2fmost-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt%2f&title=Most%20efficient%20way%20to%20run%20multiple%20websites%20on%20Docker%20with%20LetsEncrypt%20SSL">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-reddit"
          viewBox="0 0 16 16">
          <path
            d="M6.167 8a.831.831 0 0 0-.83.83c0 .459.372.84.83.831a.831.831 0 0 0 0-1.661zm1.843 3.647c.315 0 1.403-.038 1.976-.611a.232.232 0 0 0 0-.306.213.213 0 0 0-.306 0c-.353.363-1.126.487-1.67.487-.545 0-1.308-.124-1.671-.487a.213.213 0 0 0-.306 0 .213.213 0 0 0 0 .306c.564.563 1.652.61 1.977.61zm.992-2.807c0 .458.373.83.831.83.458 0 .83-.381.83-.83a.831.831 0 0 0-1.66 0z" />
          <path
            d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.828-1.165c-.315 0-.602.124-.812.325-.801-.573-1.9-.945-3.121-.993l.534-2.501 1.738.372a.83.83 0 1 0 .83-.869.83.83 0 0 0-.744.468l-1.938-.41a.203.203 0 0 0-.153.028.186.186 0 0 0-.086.134l-.592 2.788c-1.24.038-2.358.41-3.17.992-.21-.2-.496-.324-.81-.324a1.163 1.163 0 0 0-.478 2.224c-.02.115-.029.23-.029.353 0 1.795 2.091 3.256 4.669 3.256 2.577 0 4.668-1.451 4.668-3.256 0-.114-.01-.238-.029-.353.401-.181.688-.592.688-1.069 0-.65-.525-1.165-1.165-1.165z" />
        </svg>
      </a>
    </li>

    
    


    
    <li>
      <a href="whatsapp://send?text=https%3a%2f%2flackful.com%2fpost%2f2023%2fdec%2fmost-efficient-way-to-run-multiple-websites-on-docker-with-letsencrypt%2f&amp;description=Most%20efficient%20way%20to%20run%20multiple%20websites%20on%20Docker%20with%20LetsEncrypt%20SSL" target="_blank" rel="noopener"
        title="Share on WhatsApp">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" class="bi bi-whatsapp" viewBox="0 0 16 16">
          <path
            d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z" />
        </svg>
      </a>
    </li>
  </ul>
</div>


<p class="text-muted">It makes me smile, when I see it.</p>
        </div>
      </section>
      
    </div>

    
    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 mt-3">
      <div class="card">
        <div class="row no-gutters">
          <div class="col-md-2 ">
            <div class="card-body ">
              
              <img src="/img/profile.png" class="img-responsive img-50 img-round" alt="">
            </div>
          </div>


          <div class="col-md-10">
            <div class="card-body p-1.1">
              <p class="p-0 m-0"><small class="text-muted">Creator</small></p>
              <p class="card-text fs-5 m-0">

                
                Joshua Marcum
                

              </p>
              
              <p class="card-text fs-6  m-0">Expert of UNIX based systems and applications, security, and high-availability enterprise applications.</p>
              
            </div>
          </div>
        </div>
      </div>
    </div>
    

    <div class="col-lg-8 offset-lg-2 col-md-12 offset-md-1 pt-4">
      
      <ul class="list-group list-group-horizontal" style="flex-direction: row">
        


        
        <li class="list-group-item ms-auto b-0 p-0">
          <a type="button" class="btn btn-dark" role="button" href="https://lackful.com/post/2023/nov/intro/"
            data-toggle="tooltip" data-placement="top" title="Welcome Introduction">Next Post
            &rarr;</a>
        </li>
        
      </ul>
      
    </div>

    <div class="col-lg-8 offset-lg-2 col-md-10 offset-md-1 pt-4">
    </div>
  </div>
  
</div>

<div class="">
  
  
  
  
  

  
  <div class="container">
    <div class="row">
      <div class="col-lg-12 col-md-12 mt-3">
        <h3>Read More</h3>
        <hr />
      </div>

      
      

      
<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 mb-4">
    <a href="https://lackful.com/post/2024/jan/we-moved/">
        <div class="card single-post-card h-100 shadow-effect border">
            
            <img src="/img/posts/cloudflare_hu45ad629234cae5920145664bdc13d12a_22417_500x0_resize_box_3.png" alt="img/posts/cloudflare.png"
                class="card-img-top img-fluid lazyload">
            

            
            <div class="card-body">

                <h3 class="fw-bold post-title">Cloudflare Pages Migration</h3>
                

                <p class="post-meta">
                    <span class="post-meta text-muted">
  
  

  7 January 70712

  

  

  

  
</span>

                </p>
                
                <div class="post-entry">

                    
                    We moved.

                    
                </div>

                <div class="read-more-section">
                    <h6 class="text-muted link-underline">Read More <i class="bi bi-arrow-right"></i></h6>
                </div>
            </div>
        </div>
    </a>
</div>



      

      
<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 mb-4">
    <a href="https://lackful.com/post/2023/nov/intro/">
        <div class="card single-post-card h-100 shadow-effect border">
            
            <img src="/img/posts/intro_huf71ae08879bdb9de493bdbfdad761368_25721_500x0_resize_box_3.png" alt="img/posts/intro.png"
                class="card-img-top img-fluid lazyload">
            

            
            <div class="card-body">

                <h3 class="fw-bold post-title">Welcome Introduction</h3>
                

                <p class="post-meta">
                    <span class="post-meta text-muted">
  
  

  18 November 181812

  

  

  

  
</span>

                </p>
                
                <div class="post-entry">

                    
                    Who I am, why this site exists, and general introduction.

                    
                </div>

                <div class="read-more-section">
                    <h6 class="text-muted link-underline">Read More <i class="bi bi-arrow-right"></i></h6>
                </div>
            </div>
        </div>
    </a>
</div>



      
    </div>
  </div>
  
  

  

</div>

    


<footer>

  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul
          class="list-inline list-group list-group-horizontal text-center footer-links d-flex justify-content-center flex-row">

          
          <li>
            <a href="mailto:josh@nullidle.com" title="Email me" target="_blank">
              <span class="mx-2">
                <i class="bi bi-envelope"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://github.com/https://github.com/xegenix" title="GitHub" target="_blank">
              <span class="mx-2">
                <i class="bi bi-github"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://twitter.com/@polyzombic" title="Twitter" target="_blank">
              <span class="mx-2">
                <i class="bi bi-twitter"></i>
              </span>
            </a>
          </li>
          <li>
            <a href="https://linkedin.com/in/https://linkedin.com/in/insecurity" title="LinkedIn" target="_blank">
              <span class="mx-2">
                <i class="bi bi-linkedin"></i>
              </span>
            </a>
          </li>
          
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <p class="credits copyright text-muted">
          
          
          <a href="https://nullidle.com/">Joshua Marcum</a>
          
          

          &nbsp;&bull;&nbsp;&copy;
          
          2024
          

          
          &nbsp;&bull;&nbsp;
          <a href="https://lackful.com">lackful.com</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          Powered by <a href="https://gohugo.io">Hugo</a> & <a href="https://github.com/binokochumolvarghese/lightbi-hugo">Lightbi.</a>&nbsp; Made with ‚ù§ by <a href="https://binovarghese.com">Bino</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://lackful.com/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="https://lackful.com/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function () { $("pre.chroma").css("padding", "0"); }); </script>

    
  </body>
</html>

